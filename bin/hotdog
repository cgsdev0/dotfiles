#!/usr/bin/env bash

TERMINAL_CONF="$HOME/.config/ghostty/config"

vim_cmd() {
  find /run/user/1000/ -iname 'nvim*' 2> /dev/null \
  | xargs -I {} nvim --server {} --remote-send "$1" &
}

replace_terminal_theme() {
  sed -i "s/$1/$2/" "$TERMINAL_CONF"
  kill -SIGUSR2 $(pidof ghostty)
}

vim_theme() {
  vim_cmd "<Esc>:colorscheme $1<CR>"
}

hotdog() {
  replace_terminal_theme "TokyoNight Storm" "Hot Dog Stand"
  vim_theme hotdog
}

not_hotdog() {
  load_theme
  replace_terminal_theme "Hot Dog Stand" "TokyoNight Storm"
  vim_theme tokyonight-storm
}

case "$1" in
  "pane")
    cat ~/themes/override/hotdog
    ;;
  "reset")
    cat ~/themes/override/reset
    ;;
  "not")
    not_hotdog &> /dev/null
    ;;
  *)
    hotdog &> /dev/null
    ;;
esac
